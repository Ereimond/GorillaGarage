{% extends 'core/base.html' %}

{% block title %}Inicio{% endblock %}

{% block content %}
<h1>Vehiculos Ingresados</h1>
<div class="row">
{% for vehiculo in vehiculos %}
<div class="col-sm-4">
    <div class="card">
  <div class="card-header">
    {{vehiculo.placa}}
  </div>
  <div class="card-body">
    <h5 class="card-title">{{vehiculo.marca}}</h5>
    <p class="card-text">{{vehiculo.modelo}}<br>
    {{vehiculo.anovehiculo}}</p>
    <a type="button" onclick="editvehiculo(`{{vehiculo.anovehiculo|date:'Y/m/d'}}`)" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#staticBackdrop{{vehiculo.id}}"><i class="bi bi-pencil-square"></i></a>
    <a type="button" onclick="deletevehiculo('{{vehiculo.id}} ')" class="btn btn-danger btn-sm m-md-2"><i class="bi bi-trash3"></i></a>
  </div>
</div>
</div>
{% include "vehiculo/vehiculoupdate.html" %}
{% endfor %}
</div>
{% endblock %}

{% block js %}
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    function editvehiculo(anovehiculo){
        var date = new Date(anovehiculo),
    mnth = ("0" + (date.getMonth() + 1)).slice(-2),
    day = ("0" + date.getDate()).slice(-2);
    console.log(date)
  console.log([date.getFullYear(), mnth, day].join("-"));
    }
     document.getElementById("anovehiculoedit").value=[date.getFullYear(), mnth, day].join("-");
     function deletevehiculo(id) {
        Swal.fire({
            "title": `Â¿Desea Eliminar Vehiculo?`,
            "icon": "question",
            'text':``,
            "showCancelButton": true,
            "cancelButtonText": "Cancelar",
            "confirmButtonText": "Salir",
            "reverseButtons": true,
            "cancelButtonColor": "#6c757d",
            "confirmButtonColor": "#0d6efd"
        })
        .then(function(result){
            if(result.isConfirmed){
                window.location.href = "/deletevehiculo/"+id+"/"
            }
        })
    }
</script>
{% endblock js %}